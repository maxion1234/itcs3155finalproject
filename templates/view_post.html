{% extends 'forum.html' %}

{% block content %}
<div class="container">
    <h2>{{ post.title }}</h2>
    <p>Author: {{ post.author.username }}</p>
    <p>Content: {{ post.content }}</p>
    <p>Views: {{ post.views }}</p>
    <p>Likes: {{ post.likes }}</p>
    <!-- Add any other details you want to display -->

    <!-- Display replies -->
    <h3>Replies</h3>
    {% for reply in post.replies %}
    <p>{{ reply.author.username }} said: {{ reply.content }}</p>
    {% endfor %}

    <!-- Form to submit a reply -->
    <form method="post" action="{{ url_for('view_post', post_id=post.id) }}">
        <label for="reply_content">Your Reply:</label>
        <textarea name="reply_content" required></textarea>
        <button type="submit">Submit Reply</button>
    </form>
    {% if current_user.is_authenticated and current_user == post.author %}
    <form method="POST" action="{{ url_for('delete_post', post_id=post.id) }}"
        onsubmit="return confirm('Are you sure you want to delete this post?');">
        <button type="submit" class="btn btn-danger">Delete Post</button>
    </form>
    {% endif %}
    <form method="post" action="{{ url_for('like_post', post_id=post.id) }}">
        <button type="submit">Like</button>
    </form>
</div>
{% endblock %}